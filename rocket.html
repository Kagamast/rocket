<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
    <title>kagamast</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
<style>
:root{
    --textcolor: #307cff;
    --win-color: #309bff;
    --counter-color: #00d5ff;

}
#topbar{
    color: var(--textcolor);
    font-family: 'Montserrat', sans-serif;
    position: absolute;
    top: 0%;
    left: 0%;
    background-color: rgb(39, 39, 39);
    height: 100px;
    width: 100%;
    padding: 0;
}
.topthing{
    font-size: 70px;
    color: var(--textcolor);
    font-family: 'Montserrat', sans-serif;
    position: absolute;
    top: 0;
    right: 0;
    background-color: rgb(39, 39, 39);
    height: 100px;
    display: block;
    top: 0;
    margin: 0;
    padding: 5px 20px 0 20px;
    border-radius: 0 0 0 20px;
}
.topthing>span{
    font-size: 50px;
}
body{
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: #0e0e0e;
}
.material-symbols-outlined {
  font-variation-settings:
  'FILL' 1,
  'wght' 400,
  'GRAD' 0,
  'opsz' 48
}
#rocket{
    position: absolute;
    width: 100px;
    z-index: 100;
    transform: translate(-50%, 50%);
}
#finish{
    transform: translate(-50%, 50%);
    position: absolute;
    width: 20px;
    height: 100px;
    z-index: 99;
    background-image: linear-gradient(black 50%, white 50%), linear-gradient(white 50%, black 50%);
    background-size: 50% 20px;
    background-repeat: repeat-y;
    background-position: right, left;
}
.dot{
    width: 10px;
    height: 10px;
    position: absolute;
    border-radius: 100%;
    background-color: white;
}
/*#source{
    position: absolute;
    left: 500px;
    bottom: 590px;
    width: 20px;
    height: 20px;
    border-radius: 100%;
    background-color: red;
}*/
.planet{
    z-index: 2;
    position: absolute;
    height: 80px;
    width: 80px;
    margin-bottom: -40px;
    margin-left: -40px;
    background-color: rgb(255, 111, 0);
    background-image: linear-gradient(350deg, transparent 40%, #fff4 40%, #fff4 70%, transparent 70%);
    border-radius: 100%;
}
.star{
    z-index: 2;
    position: absolute;
    height: 100px;
    width: 100px;
    margin-bottom: -50px;
    margin-left: -50px;
    background-color: #fff;
    box-shadow: 0 0 20px white;
    border-radius: 100%;
}
.blackHole{
    z-index: 2;
    position: absolute;
    height: 100px;
    width: 100px;
    margin-bottom: -50px;
    margin-left: -50px;
    background-color: #000;
    box-shadow: 0 0 20px #000;
    border-radius: 100%;
}
#infoboard{
    display: none;
    font-family: monospace;
    font-size: 70px;
    text-align: center;
    position: fixed;
    z-index: 1000;
    background-color: #000d;
    min-width: 100px;
    min-height: 100px;
    left: 50vw;
    top: 50vh;
    transform: translate(-50%, -50%);
    color: white;
    padding: 30px;
    border-radius: 40px;
    animation: slideIn 0.5s ease-out 1s forwards;
    opacity: 0;
}
#infoboard h3, h4{
    margin: 0;
}
.wall{
    z-index: 1;
    position: absolute;
    background-color: #db4d19;
}
#winscreen{
    display: none;
    --color: #ffc400;
    z-index: 2000;
    width: 400px;
    height: 300px;
    top: 10vh;
    box-shadow: 0 0 0 100vmax #0009, 0 0 0 100vmax #000b inset;
    position: relative;
    margin: auto;
    --inset: 80px;
    --thickness: 30px;
    padding: var(--inset);
    backdrop-filter: blur(5px);
    color: #fff;
}
#winscreen::before{
    content: "";
    background-color: var(--win-color);
    position: absolute;
    inset: 0;
    clip-path: polygon(
        0% var(--inset),
        var(--inset) 0%,
        100% 0%,
        100% calc(100% - var(--inset)),
        calc(100% - var(--inset)) 100%,
        0% 100%,
        0% calc(100% - var(--thickness)),
        var(--thickness) calc(100% - var(--thickness) *2),
        var(--thickness) calc(100% - var(--thickness)),
        calc(100% - var(--inset)) calc(100% - var(--thickness)),
        calc(100% - var(--thickness)) calc(100% - var(--inset)),
        calc(100% - var(--thickness)) var(--thickness),
        var(--inset) var(--thickness),
        var(--thickness) var(--inset),
        var(--thickness)  calc(100% - var(--thickness) * 3),
        0% calc(100% - var(--thickness) * 2)
    );
}
.winTitle{
    width: 100%;
}
.displayTime{
    display: grid;
    grid-template-columns: 4fr 4fr 1fr 4fr 4fr;
    gap: 10px;
    width:max-content;
    margin: 10px auto;
}
.displayDigit{
   height: 60px;
}
.winMenu{
    position: absolute;
    bottom: var(--inset);
    left: var(--inset);
    right: var(--inset);
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
}
.winMenu button{
    font-size: 60px;
    background-color: transparent;
    color: var(--win-color);
    font-weight: 900;
    padding: 10px;
    border: 10px solid var(--win-color);
    transform: skew( -20deg, 0);
    cursor: pointer;
}
@keyframes slideIn {
    from{opacity: 0;}
    to{opacity: 1;}
}
</style>
</head>




<body id="body">
        <p class="topthing" id="maxscore" style="float: right;"><span class="material-symbols-outlined">
            military_tech
            </span>000</p>
<img src="gameImages/rocket.png" alt="rocket" id="rocket">
<div id="finish"></div>
<div id="dotContainer">
</div>
<div id="source">
</div>
<div id="infoboard">
    <h3 id="infoboardTitle"></h3>
    <h4 id="infoboardDescription" style="font-size: 50px;"></h4>
</div>
<div id="winscreen">
    <img src="gameImages/youwon.svg" class="winTitle"></img>
    <div class="displayTime">
        <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 14" class="sevenDigit displayDigit"></svg>
        <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 14"class="sevenDigit displayDigit"></svg>
        <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 14" class="colon displayDigit">
            <path d="M 0 4 L 1 3 L 2 4 L 1 5 Z M 1 9 L 2 10 L 1 11 L 0 10 L 1 9 Z" fill="var(--counter-color)"/>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 14" class="sevenDigit displayDigit"></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 14"class="sevenDigit displayDigit"></svg>
    </div>
    <div class="winMenu">
        <button onclick="window.open('index.html', '_self')" class="material-symbols-outlined">menu</button>
        <button onclick="startRocket(); document.getElementById('winscreen').style.display = 'none'; rocket.status = 0; time.minutes = 0; time.seconds = 0;" class="material-symbols-outlined">replay</button>
        <button class="material-symbols-outlined">arrow_forward</button>
    </div>

</div>
</body>



<script src="functions.js"></script>
<script>
let hexChars = "23456789a"
let starChars = "9abcdef"
let dotContainer = document.getElementById("dotContainer");
let objectContainer = document.getElementById("source");
let dotclass = document.getElementsByClassName("dot");
let displayWall = document.getElementsByClassName("wall");
let sevenDigit = document.getElementsByClassName("sevenDigit");
let wallList = [];
let distanceX = 0;
let distanceY = 0;
let angle = 0;
let rocket = {
    size: 11,
    id: document.getElementById('rocket'),
    positionX: 70,
    positionY: window.innerHeight / 2,
    velocityX: 0,
    velocityY: 0,
    status: 0,
}
let time = {
    minutes: 0,
    seconds: 0,
}
let sevenSegment = [
    "yyyyyyn", //0
    "nyynnnn", //1
    "yynyyny", //2
    "yyyynny", //3
    "nyynnyy", //4
    "ynyynyy", //5
    "ynyyyyy", //6
    "yyynnnn", //7
    "yyyyyyy", //8
    "yyyynyy", //9
]
let finish = {
    id: document.getElementById("finish"),
    height: 100,
    positionX: window.innerWidth - 10,
    positionY: window.innerHeight / 2,
}
let objectRadius = {
    planet: 20,
    star: 25,
    blackHole: 30,
}
let infoboard = {
    id: document.getElementById("infoboard"),
    title: document.getElementById("infoboardTitle"),
    description: document.getElementById("infoboardDescription"),
    visible: false,
}
const gravitySources = []; // size, X, Y, type
createCelestialObject(1, 400, window.innerHeight / 2, "planet", ); //1,400,ph50,"planet"
createCelestialObject(3, 800, window.innerHeight / 2, "star", );//3,800,ph50,"star"
createCelestialObject(20, 1200, window.innerHeight / 2, "blackHole", );//20,1200,ph50,"blackHole"
// ?objects=20,1200,ph50,"blackHole"|1,400,ph50,"planet"|3,800,ph50,"star"
buildWall(200, 200, 400, 100);
let forces = [];
let randomColor = "#444";

sevenDigit[0].innerHTML = generateNumber(sevenSegment[0]);
sevenDigit[1].innerHTML = generateNumber(sevenSegment[0]);
sevenDigit[2].innerHTML = generateNumber(sevenSegment[0]);
sevenDigit[3].innerHTML = generateNumber(sevenSegment[0]);
moveRocket(rocket.positionX, rocket.positionY);
moveFinish(finish.positionX, finish.positionY);



window.addEventListener('mousemove', (e) => {
    if(rocket.status == 0){
        distanceX = e.clientX - rocket.positionX;
        distanceY = window.innerHeight - e.clientY - rocket.positionY;
        rotateRocket(distanceX, distanceY);
    }
});
window.addEventListener('mousedown', (e) => {
    distanceX = e.clientX - rocket.positionX;
    distanceY = window.innerHeight - e.clientY - rocket.positionY;
    if(rocket.status == 0){
        rocket.velocityX = distanceX / 100;
        rocket.velocityY = distanceY / 100;
        startRocket();
    }
    rocket.status = 1;
});
window.addEventListener("keydown", function(event) {
    if(infoboard.visible){
        hideInfoboard();
    }
    if(rocket.status == 4){
        restartGame();
    }
    if ((event.keyCode == 119|| event.keyCode == 87) && rocket.status != 0) {
        rocket.status = 2;
    }else if (event.keyCode == 32 && rocket.status != 0) {
        rocket.status = 3;
    }    
});
window.addEventListener("keyup", function(event) {
    if ((event.keyCode == 119|| event.keyCode == 87) && rocket.status == 2) {
        rocket.status = 1;
    }else if (event.keyCode == 32 && rocket.status == 3) {
        rocket.status = 1;
    }
});


setInterval(moveTime, 1000);
</script>
</html>